<style type="text/css">
    .fa-star {
        /*width: 30px;*/
        height: 30px;
        padding: 0px;
        /* border-bottom: 1px solid #fe5a84; */
        /* border-top: 1px solid #ff8f2b; */
        color: #FD7357;
        border-radius: 4px;
        /* border-right: 1px solid #fe5a84; */
        /* border-left: 1px solid #ff8f2b; */
    }

    .star-over {
        overflow: hidden;
        position: absolute;
        top: 0;
        /*left: -7px;*/
    }
</style>


<div class="formContainerBg clearfix">
    <div class="col-sm-8 col-md-8 col-xs-12 bgWhite pad10-lr">
        <!--     <pre>{{product}}</pre> -->
        <div class="col-sm-6 col-xs-12 pad10" ng-class="(err.category_id == true) ? 'has-error' : 'has-primary'">
            <label class="labelName" for="category">Vendor Type</label>
            <div>
                <select ng-if="page.type == 'post'" class="form-control" ng-model="product.category_id" ng-focus="err.category_id = false;" ng-change="getAttributes(product.category_id)">
                    <option value="" hidden>Select Vendor Type</option>
                    <option ng-repeat="category in categoriesList| orderBy : 'category_name'" value={{category.id}}>{{category.category_name}}</option>
                </select>
                <!-- <select ng-if="page.type == 'post'" name="city" ng-model="item.category_id" class="form-control" required ng-options="item.id as item.category_name for item in categoriesList| orderBy:'name'" ng-change="getAttributes(item.category_id)" ng-focus="err.category_id=false;">
                    <option value="" disabled="true">Please select category</option>
                    <option value="" ng-if="false"></option>
                    </select>-->
                <select ng-if="page.type == 'put'" class="form-control" ng-disabled="true" ng-model="product.category_id" ng-options='category.id as category.category_name for category in categoriesList' ng-focus="err.category_id = false;">
                    <option value="" hidden>Select Vendor Type</option>
                </select>
            </div>
            <div>
                <span class="text-danger" ng-show="err.category_id">Please select vendor type</span>
            </div>
        </div>
        <div class="col-xs-12 col-sm-6 pad10">
            <div ng-class="(err.product_name == true) ? 'has-error' : 'has-primary'">
                <label class="labelName" for="name">Product Name</label>
                <div>
                    <input type="text" placeholder="Enter product name" ng-focus="err.product_name = false;" class="form-control" name="product_name" ng-model="product.product_name" required>
                    <input type="hidden" class="form-control" name="product.product_id" ng-model="product.product_id">
                </div>
                <div>
                    <span class="text-danger" ng-show="err.product_name">Please enter product name</span>
                </div>
            </div>
        </div>
        <div class="clearfix">
            <div class="col-xs-12 col-sm-6 pull-left pad10">
                <div ng-class="(err.short_description == true) ? 'has-error' : 'has-primary'">
                    <label class="labelName" for="name">Short Description</label>
                    <div>
                        <textarea 
                            cols="4" 
                            rows="6" 
                            class="form-control" 
                            placeholder="Enter short description" 
                            ng-model="product.short_description" 
                            ng-focus="err.short_description = false;" 
                            style="height: 129px;resize: none;"></textarea>
                        <!-- <input type="text" placeholder="Short Description" c class="form-control" name="shortDesc" ng-model="product.shortDesc" required> -->
                    </div>
                    <div>
                        <span class="text-danger" ng-show="err.short_description">Please enter short description</span>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-sm-6 pull-right pad10">
                <div ng-class="(err.status_id == true) ? 'has-error-no' : 'has-primary'">
                    <label class="labelName" for="status">Product Status</label>
                    <div>
                        <!--{{productStatusList | json}}-->
                        <select ng-if="page.type == 'post'" class="form-control" ng-model="product.status_id" ng-focus="err.status_id = false;">
                            <option value="" hidden>Please select status</option>
                            <option ng-repeat="status in productStatusList" value={{status.id}}>{{status.status_text}}</option>
                        </select>
                        <select ng-if="page.type == 'put'" class="form-control" ng-model="product.status_id" ng-options='status.id as status.status_text for status in productStatusList' ng-focus="err.status_id = false;">
                            <option value="">Please select status</option>
                        </select>
                    </div>
                    <div>
                        <span class="text-danger" ng-show="err.status_id">Please select product status</span>
                    </div>
                </div>
            </div>
            <div class="pad10 col-xs-12 col-sm-6">
                <label class="labelName" for="productCode">Product UPC/EAN Code</label>
                <div>
                    <input type="text" placeholder="Enter product UPC/EAN code" class="form-control" name="productCode" ng-model="product.product_upc_ean_code" required>
                </div>
            </div>
        </div>
        <div class="col-xs-12 col-sm-12 pad10">
            <div ng-class="(err.long_description == true) ? 'has-error' : 'has-primary'">
                <label class="labelName" for="longDesc">Long Description</label>
                <div class="textEditor">
                    <text-angular ta-toolbar="[['h1','h2','h3','h4','h5','h6','p','quote','bold','italics','underline','strikeThrough','ul','ol','undo','redo','clear']]" cols="4" rows="6" class="form-control auto-height custom-form-control" placeholder="Enter long description" ng-model="product.long_description" ng-focus="err.long_description = false;" id="textAngular"></text-angular>
                </div>
                <div class="col-xs-4 noPad">
                    <span class="text-danger" ng-show="err.long_description">Please enter long description</span>
                </div>
            </div>
        </div>
        <div class="col-xs-12 col-sm-12" style="border-bottom: 1px solid #ECEDF0;padding: 0px 0px 10px 0px;">
            <div class="col-xs-6 pad10">
                <label class="labelName" for="searchKey">Search Keywords</label>
                <div>
                    <textarea cols="4" rows="5" class="form-control" placeholder="Comma separated values" ng-model="product.search_keywords" style="resize: none;"></textarea>
                </div>
            </div>
            <div class="col-xs-6 pad10">
                <label class="labelName" for="metaKey">Meta Keywords</label>
                <div>
                    <textarea cols="4" rows="5" class="form-control" placeholder="Comma separated values" ng-model="product.meta_keywords" style="resize: none;"></textarea>
                </div>
            </div>
        </div>
        <!--<pre>{{block1}}</pre>--> 
        <div class="col-xs-12 noPad">
            <div class="col-xs-12 noPad" ng-repeat="tax in block1 track by $index">
                <div class="col-xs-10 pad5">
                    <div class="col-sm-3 pad5">
                        <div ng-class="(tax.location_idv == true) ? 'has-error' : 'has-primary'">
                            <label class="labelName"  for="location_id">Product Location</label>
                            <div>
                                <select ng-if="page.type == 'post'" class="form-control" ng-model="tax.location_id" ng-focus="tax.location_idv = false;">
                                    <option value="" hidden>Select</option>
                                    <option ng-repeat="location in locationsList" value={{location.id}}>{{location.location_name}}</option>
                                </select>
                                <input type="hidden" class="form-control" name="tax.id" ng-model="tax.id">
                                <select ng-if="page.type == 'put'" class="form-control" ng-model="tax.location_id" ng-options='location.id as (location.location_name) for location in locationsList' ng-focus="tax.location_idv = false;">
                                    <option value="" hidden>Select</option>
                                </select>
                            </div>
                            <div>
                                <span class="text-danger" ng-show="tax.location_idv">Please select location</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-2  pad5">
                        <div class="" ng-class="(tax.tax_class_idv == true) ? 'has-error' : 'has-primary'">
                            <label  class="labelName" for="name">Tax Class</label>
                            <div>
                                <select ng-if="page.type == 'post'" class="form-control" ng-model="tax.tax_class_id" ng-focus="tax.tax_class_idv = false;">
                                    <option value="" hidden>Select</option>
                                    <option ng-repeat="tax in taxsList" value={{tax.id}}>{{tax.tax_label}}</option>
                                </select>
                                <select ng-if="page.type == 'put'" class="form-control" ng-model="tax.tax_class_id" ng-options='tax.id as tax.tax_label for tax in taxsList' ng-focus="tax.tax_class_idv = false;">
                                    <option value="" hidden>Select</option>
                                </select>
                            </div>
                            <div>
                                <span class="text-danger" ng-show="tax.tax_class_idv">Please enter tax class</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-2 pad5">
                        <div class="" ng-class="(tax.currency_idv == true) ? 'has-error' : 'has-primary'">
                            <label  class="labelName" for="name">Currency</label>
                            <div>
                                <select ng-if="page.type == 'post'" class="form-control" ng-model="tax.currency_id" ng-focus="tax.currency_idv = false;">
                                    <option value="" hidden>Select</option>
                                    <option ng-repeat="currency in currencyList" value={{currency.id}}>{{currency.currency_short_code}}</option>
                                </select>
                                <select ng-if="page.type == 'put'" class="form-control" ng-model="tax.currency_id" ng-options='currency.id as currency.currency_short_code for currency in currencyList' ng-focus="tax.currency_idv = false;">
                                </select>
                            </div>
                            <div>
                                <span class="text-danger" ng-show="tax.currency_idv">Please select currency</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-2 pad5">
                        <div class="" ng-class="(tax.costv == true) ? 'has-error' : 'has-primary'">
                            <label  class="labelName" for="cost">Cost</label>
                            <div>
                                <input type="text" placeholder="Cost" ng-focus="tax.costv = false;" class="form-control" name="cost" ng-change="checkcost(tax.cost, $index)" ng-model="tax.cost" currency-input size="30" required>
                            </div>
                            <div>
                                <span class="text-danger" ng-show="tax.costv">Please enter cost</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-3 pad5">
                        <div class="" ng-class="(tax.measure_idv == true) ? 'has-error' : 'has-primary'">
                            <label class="labelName" for="name">Unit of Measure</label>
                            <div>
                                <select ng-if="page.type == 'post'" class="form-control" ng-model="tax.measure_id" ng-focus="tax.measure_idv = false;">
                                    <option value="" hidden>Select</option>
                                    <option ng-repeat="measure in measuresList" value={{measure.id}}>{{measure.measure_name}}</option>
                                </select>
                                <select ng-if="page.type == 'put'" class="form-control" ng-model="tax.measure_id" ng-options='measure.id as measure.measure_name for measure in measuresList' ng-focus="tax.measure_idv = false;">
                                </select>
                            </div>
                            <div>
                                <span class="text-danger" ng-show="tax.measure_idv">Please select Unit of measure</span>
                            </div>
                        </div>
                    </div>
                 <div id="teamsdiv" style="display: none;" class="col-xs-6 pad5">
                    <div class="" ng-class="(tax.team_idv == true) ? 'has-error' : 'has-primary'">
                            <label class="labelName" for="name">Teams</label>
                            <div>
                            <select ng-if="page.type == 'post'" class="form-control" ng-model="tax.team_id" ng-focus="tax.team_idv = false;">
                                    <option value="" hidden>Select</option>
                                    <option ng-repeat="team in teamsList" value={{team.team_id}}>{{team.team_name}}</option>
                                </select>
                                <select ng-if="page.type == 'put'" class="form-control" ng-model="tax.team_id" ng-options='team.team_id as team.team_name for team in teamsList' ng-focus="tax.team_idv = false;">
                                </select>
                            </div>
                            <div>
                                <span class="text-danger" ng-show="tax.team_idv">Please select Teams</span>
                            </div>
                        </div>
                    </div>
                      <div  id="teamsdiv1"  style="display: none;" class="col-xs-6 pad5">
                        <div class="" ng-class="(tax.percountv == true) ? 'has-error' : 'has-primary'">
                            <label  class="labelName" for="noofpersons">persons count</label>
                            <div>
                                <input type="text" placeholder="persons count" ng-focus="tax.percountv = false;" class="form-control" name="noofpersons" ng-change="checkcost(tax.cost, $index)" ng-model="tax.noofpersons" currency-input size="30" required>
                            </div>
                            <div>
                                <span class="text-danger" ng-show="tax.percountv">Please enter persons count</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xs-2 pad20-top">
                    <button type="button" class="btn btn-default btn-circle roundButtonBg buttonBg" ng-click="incrementBlock1()" style="border-radius: 22px;position:relative;top: 23px;"><i class="glyphicon glyphicon-plus"></i></button>
                    <button type="button" class="btn btn-default btn-circle deleteButton" ng-show="block1.length > 1" ng-click="decrementBlock1($index, tax)" style="border-radius: 22px;position:relative;top: 23px;"><i class="glyphicon glyphicon-trash"></i></button>
                </div>
            </div>
        </div>
        <!-- <pre> {{block2}} </pre> -->
        <div class="col-xs-12 pad10">
            <hr class="seperator" />
            <h3 class="formSectionTitle" style="line-height: 1; padding-top: 15px;">Product Attributes</h3>

            <div class="col-xs-12 noPadd" ng-repeat="(key, select) in multiSelBlocks">
                <div class="col-xs-5 noPad">
                    <div class="" ng-class="(select.idval == true) ? 'has-error-no' : 'has-primary'">
                        <label class="labelName pad20-top" for="id">Attribute Name</label>
                        <div>
                            <!--     {{select}} -->
                            <select ng-if="page.type == 'post'" 
                                    ng-model="select.id" 
                                    class="form-control select_attr_{{key}}" 
                                    name="attr" 
                                    ng-change="getAttributeValue(select, select.id, product.category_id, key);" 
                                    ng-focus="select.idval = false;">
                                <option value="" hidden>Select</option>
                                <option ng-repeat="adress in attributesList" value="{{adress.id}}" id="attr_{{adress.id}}">{{adress.attribute_name}}</option>
                            </select>
                            <input type="hidden" class="form-control" name="select[$index].attr_id" ng-model="select.attr_id">
                            <select ng-if="page.type == 'put'" ng-change="getAttributeValueput(select, select.id, product.category_id, key);" class="form-control select_attr_{{key}}" ng-model="select.id" ng-options='attribute.id as attribute.attribute_name for attribute in attributesList' ng-focus="select.idval = false;">
                                <option value="" hidden>Select</option>
                            </select>
                        </div>
                        <div>
                            <span class="text-danger" ng-show="select.idval">Please select attribute name</span>
                        </div>
                    </div>
                </div>
                <div class="col-xs-5">
                    <div class="" ng-class="(select.err == true) ? 'has-error-no' : 'has-primary'">
                        <label class="labelName pad20-top" for="value">Attribute Value</label>
                        <div ng-if="page.type == 'post'" ng-init="select.attr_mode == 'single'">
                            <select ng-hide="select.attr_mode == 'multiple'" id="myselect" ng-model="select.sinvalue" class="form-control " ng-options="value.id as value.attribute_value  for value in select.attributesValuesList" ng-change="generateboxpost(select.sinvalue, select, key)" ng-focus="select.err = false;">
                                <option value="" ng-hide="true" hidden>Select</option>
                                <option value="" ng-if="false"></option>
                            </select>
                            <select ng-if="select.attr_mode == 'multiple'" ng-model="select.mulvalue"  id="myselect" name="myselect" class="form-control" ng-options="value.id as value.attribute_value  for value in select.attributesValuesList" ng-change="generateboxpost(select.mulvalue, select, key)" ng-focus="select.err = false;" multiple>
                                <option value="" ng-hide="true" hidden>Select</option>
                                <option value="" ng-if="false"></option>
                            </select>

                            <div ng-class=" (select.other_text == true) ? 'has-error1' : 'has-primary'">
                                <input ng-if="page.type == 'post'" type="text"  name="color1" ng-model="select.text" id="color" ng-show="select.hide == 1" 
                                       ng-focus="select.other_text = false;" required/>
                                <input type="text" name="color1" ng-model="select.attri_value" id="color" style='display:none' />
                            </div>
                            <div ng-if="page.type == 'post'">
                                <span class="text-danger " ng-show="!select.err && select.hide == 1 && select.other_text">Please enter text</span> 
                            </div>
                        </div>
                        <!-- <pre>{{attributesValuesList}}</pre>-->
                        <!--    <select ng-if="page.type == 'post'" ng-model="tax.value" class="form-control" ng-options="value.id as value.attribute_value  for value in attributesValuesList[key+1]" ng-change="getAttributeValue(tax.id,product.category_id,key);" ng-focus="err.value=false;">
                            <option value="" disabled="true">select value</option>
                            <option value="" ng-if="false"></option>
                            </select>-->
                        <!--   <pre>{{select.sinvalue}}{{select}}{{key+1}}</pre> -->
                        <div ng-if="page.type == 'put'">
                            <select ng-hide="select.attr_mode == 'multiple'" ng-model="select.sinvalue" class="form-control" ng-options="value.id as value.attribute_value  for value in select.attributesValuesList" ng-change="generatebox(select.sinvalue, select, key + 1)" ng-focus="select.err = false;">
                                <option value="" ng-hide="true" hidden>Select</option>
                                <option value="" ng-if="false"></option>
                            </select>
                            <select ng-if="select.attr_mode == 'multiple'" ng-model="select.mulvalue" class="form-control" id="vallll" ng-options="value.id as value.attribute_value  for value in select.attributesValuesList" ng-change="generatebox(select.mulvalue, select, key + 1)" ng-focus="select.err = false;" multiple>
                                <option value="" ng-hide="true" hidden>Select</option>
                                <option value="" ng-if="false"></option>
                            </select>
                        </div>
                        <div ng-class=" (select.other_text == true) ? 'has-error1' : 'has-primary'">
                            <input type="text" ng-if="page.type == 'put'" name="color1" ng-model="select.text" id="color" ng-show="select.hide == 1"  ng-focus="select.other_text = false;" />
                            <input type="text" name="color1" ng-model="select.attri_value" id="color" style='display:none' />
                            <div>
                                <span class="text-danger ng-hide" ng-if="page.type == 'put'" ng-show="select.other_text">Please enter value</span> 
                            </div>
                        </div>
                        <span class="text-danger" ng-show="select.err">Please select value</span>
                    </div>
                </div>
                <div class="col-xs-2">
                    <div class="pad5 pad20-top mar5-top">
                        <button type="button" class="btn btn-default btn-circle buttonBg" ng-click="incrementBlock2(select, key, select.sinvalue)" style="border-radius: 22px;position:relative;top: 23px;"><i class="glyphicon glyphicon-plus" style="font-size: 12px;left: 1px;"></i></button>
                        <button type="button" class="btn btn-default btn-circle deleteButton" ng-show="multiSelBlocks.length > 1" ng-click="decrementBlock2($index, select)" style="border-radius: 22px;position:relative;top: 23px;"><i class="glyphicon glyphicon-trash"></i></button>
                    </div>
                </div>
                <!-- <div class="col-xs-2">
                    <div class="form-group">
                        <i class="glyphicon glyphicon-plus" ng-click="incrementBlock2()" style="font-size: 12px;position: relative;top: 37px;cursor: pointer;"></i>
                        <i class="glyphicon glyphicon-minus" ng-show="block2.length > 1" ng-click="decrementBlock2($index,tax)" style="font-size: 12px;position: relative;top: 37px;cursor: pointer;"></i>
                    </div>
                    </div> -->
            </div>
            <!--                <fieldset class="scheduler-border">
                                <legend class="scheduler-border" style="font-weight:500;width: 156px;padding-left: 3px;
                                        "></legend>
                            </fieldset>-->
        </div>
        <!--        {{multiSelBlocks}} -->
        <div class="col-xs-12 pad10" style="border-bottom: 1px solid #ECEDF0;padding: 10px 10px 20px 10px;">
            <h3 class="formSectionTitle">Product Media</h3>
            <!--{{block3| json}}  ng-repeat='(key, value) in block3 track by $index'-->
            <div class='clearfix pad20-top'>
                <div class="col-sm-3 noPad">
                    <div class="">
                        <label class="labelName" for="attrName">Images</label>
                        <div>
                            <label for="image" class="custom-file-upload labelCaps" ng-click="addImages()">
                                <!--                            <i class="fa fa-plus"></i> Add Files-->
                                Select Images
                            </label>
                            <input type="file" multiple="multiple" class="productImg" id="image" onchange="angular.element(this).scope().getFileDetails(this)" accept="image/*" />
                        </div>
                    </div>
                    <div style="margin-left:5px; padding-bottom: 2px;" ng-repeat="img in imgList track by $index">
                        <a href={{product.imagepath}}{{img.uploadname}} target="_blank" class="imageLableText" title="{{img.name}}">{{img.name}}&nbsp;</a><i style="cursor: pointer;" class="glyphicon glyphicon-remove" ng-click="removeImage($index, img)"></i>
                        <input type="hidden" class="form-control" name="img.id" ng-model="img.id">
                    </div>
                </div>
                <div class="col-sm-7 noPad">
                    <div class="mar10-right">
                        <label class="labelName" for="value">
                            Vimeo/Youtube video
                            <!--<br> {{videoList | json}}-->
                        </label>
                        <div>
                            <!--  <label type="button" class="custom-file-upload" ng-click="addVideo()" class="form-control"><i class="fa fa-plus"></i> Add Files
                                                                                </label>-->
                            <!--<input type="text" name="video" placeholder="Paste link to Youtube/Vimeo" class="form-control" ng-model="video.url" style="">-->
                            <!--<input type="hidden" class="form-control" name="video.id" ng-model="video.id">-->
                            <div class='pad10-bottom' ng-repeat="video in videoList">
                                <input type="text" name="video" class="form-control" placeholder="Paste link to Youtube/Vimeo" ng-model="video.url">
                                <input type="hidden" class="form-control" name="video.id" ng-model="video.id">
                                <div style='display: inline-block;float: right;margin-top: -29px;margin-right: -20px;' ng-if="!$first">
                                    <i class="glyphicon glyphicon-remove" ng-click="removeVideo($index, video)" style="cursor: pointer;">
                                    </i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xs-2">
                    <div class="pad5 pad10-top">
                        <button type="button" class="btn btn-default btn-circle roundButtonBg buttonBg" ng-click="addVideo()" style="border-radius: 22px;position:relative;top: 23px;"><i class="glyphicon glyphicon-plus" style="font-size: 12px;left: 1px;"></i></button>
                        <button type="button" class="btn btn-default btn-circle deleteButton" ng-show="multiSelBlocks.length > 1" ng-click="removeVideo($index, video)" style="border-radius: 22px;position:relative;top: 23px;"><i class="glyphicon glyphicon-trash"></i></button>
                    </div>
                </div>
                <!--            <fieldset class="scheduler-border1">
                                <legend class="scheduler-border1" style="font-weight:500;width: 130px;padding-left: 3px;">Product Media</legend>
                                
                            </fieldset>-->
            </div>
        </div>
    </div>
    <div class="col-xs-12 col-sm-4 col-md-4 pad10-lr">
        <div class="col-sm-12" ng-if="page.type == 'post'">
            <button type="submit" 
                    ng-disabled="isResponse" 
                    class="btn btn-primary loginButton buttonBg anchorButton col-sm-12  mar20-top pad10 height50" 
                    ng-click="addProduct(product, block1, multiSelBlocks, 1)">
                Create Product
            </button>
        </div>
        <div class="col-sm-6 pad10" ng-if="page.type == 'put'" >
            <button type="submit"
                    ng-disabled="isResponse" 
                    class="btn btn-primary loginButton buttonBg anchorButton col-sm-12 mar20-top pad10 height50" 
                    ng-click="editProduct(product, block1, multiSelBlocks)">
                Update
            </button>
        </div>
        <div class="col-sm-6 pad10" ng-if="page.type == 'put'" >
            <button type="submit" 
                    class="btn btn-info buttonBg-white anchorButton mar20-top pad10 col-sm-12 loginButton" 
                    ng-click="goToList()">
                Cancel
            </button>
        </div>
    </div>



    <div class="col-xs-12 col-sm-4 col-md-4 pad20-lr">
        <div ng-hide="currentPath === '/product_service_catalog/addProduct'" 
             class="clearfix text-center ratingHolder" 
             style="display: block; positon: relative; padding-left: 0px; background: #fff; margin-top: 20px; border-radius: 8px;">
            <a class="default_star" style="cursor:text;" href="javascript:void(0)" id="example" rel="popover" data-content="" data-placement="bottom">
                <h1 class="product-stars" style="font-size: 18px;cursor: pointer;">
                    <!--{{AverageRating}}--> 
                    <span class="rating">
                        <ul class="list-inline">
                            <li>
                                <i class="star star-under fa fa-star-o">
                                    <i ng-show="AverageRating > 0" 
                                       class="star star-over fa fa-star" 
                                       ng-class="{width25:AverageRating <= 0.25, width50:(AverageRating > 0.25 && AverageRating <= 0.50), width75:(AverageRating > 0.50 && AverageRating <= 0.75), width100:(AverageRating > 0.75 && AverageRating = 1)}"></i>

                                </i>
                            </li>
                            <li>
                                <i class="star star-under fa fa-star-o">
                                    <i ng-show="AverageRating > 1" class="star star-over fa fa-star" ng-class="{width25:AverageRating <= 1.25, width50:(AverageRating > 1.25 && AverageRating <= 1.50), width75:(AverageRating > 1.50 && AverageRating <= 1.75), width100:(AverageRating > 1.75 && AverageRating <= 2)}"></i>
                                </i>
                            </li>
                            <li>
                                <i class="star star-under fa fa-star-o">
                                    <i ng-show="AverageRating > 2" class="star star-over fa fa-star" ng-class="{width25:AverageRating <= 2.25, width50:(AverageRating > 2.25 && AverageRating <= 2.50), width75:(AverageRating > 2.50 && AverageRating <= 2.75), width100:(AverageRating > 2.75 && AverageRating <= 3)}"></i>
                                </i>
                            </li>
                            <li>
                                <i class="star star-under fa fa-star-o">
                                    <i ng-show="AverageRating > 3" class="star star-over fa fa-star" ng-class="{width25:AverageRating <= 3.25, width50:(AverageRating > 3.25 && AverageRating <= 3.50), width75:(AverageRating > 3.50 && AverageRating <= 3.75), width100:(AverageRating > 3.75 && AverageRating <= 4)}"></i>
                                </i>
                            </li>
                            <li>
                                <i class="star star-under fa fa-star-o">
                                    <i ng-show="AverageRating > 4" class="star star-over fa fa-star" ng-class="{width25:AverageRating <= 4.25, width50:(AverageRating > 4.25 && AverageRating <= 4.50), width75:(AverageRating > 4.50 && AverageRating <= 4.75), width100:(AverageRating > 4.75 && AverageRating <= 5)}"></i>
                                </i>
                            </li>
                            <li><span>({{ReviewList_count.length}})</span></li>
                        </ul>
                    </span>
                    <!--                    <span class="rating">
                                            <ul class="list-inline">
                                                <li>
                                                    <i class="star star-under fa fa-star-o">
                                                        <i ng-show="AverageRating > 0" class="star star-over fa fa-star" ng-class="{width25:AverageRating <= 0.25, width50:(AverageRating > 0.25 && AverageRating <= 0.50), width75:(AverageRating > 0.50 && AverageRating <= 0.75), width100:(AverageRating > 0.75 && AverageRating = 1)}"></i>
                                                    </i>
                                                </li>
                                                <li>
                                                    <i class="star star-under fa fa-star-o">
                                                        <i ng-show="AverageRating > 1" class="star star-over fa fa-star" ng-class="{width25:AverageRating <= 1.25, width50:(AverageRating > 1.25 && AverageRating <= 1.50), width75:(AverageRating > 1.50 && AverageRating <= 1.75), width100:(AverageRating > 1.75 && AverageRating <= 2)}"></i>
                                                    </i>
                                                </li>
                                                <li>
                                                    <i class="star star-under fa fa-star-o">
                                                        <i ng-show="AverageRating > 2" class="star star-over fa fa-star" ng-class="{width25:AverageRating <= 2.25, width50:(AverageRating > 2.25 && AverageRating <= 2.50), width75:(AverageRating > 2.50 && AverageRating <= 2.75), width100:(AverageRating > 2.75 && AverageRating <= 3)}"></i>
                                                    </i>
                                                </li>
                                                <li>
                                                    <i class="star star-under fa fa-star-o">
                                                        <i ng-show="AverageRating > 3" class="star star-over fa fa-star" ng-class="{width25:AverageRating <= 3.25, width50:(AverageRating > 3.25 && AverageRating <= 3.50), width75:(AverageRating > 3.50 && AverageRating <= 3.75), width100:(AverageRating > 3.75 && AverageRating <= 4)}"></i>
                                                    </i>
                                                </li>
                                                <li>
                                                    <i class="star star-under fa fa-star-o">
                                                        <i ng-show="AverageRating > 4" class="star star-over fa fa-star" ng-class="{width25:AverageRating <= 4.25, width50:(AverageRating > 4.25 && AverageRating <= 4.50), width75:(AverageRating > 4.50 && AverageRating <= 4.75), width100:(AverageRating > 4.75 && AverageRating <= 5)}"></i>
                                                    </i>
                                                </li>
                                                <li><span>({{ReviewList_count.length}})</span></small></li>
                                            </ul>
                                        </span>-->
                </h1>
            </a> 
        </div>
        <div id="popover_content_wrapper" style="display: none;">
            <div class="row">
                <div class="col-sm-12 text-center" style="padding: 10px 10px 10px 10px;">{{AverageRatingList}} Out of 5 stars</div>
            </div>
            <div class="row" style="padding: 10px 10px 0px 10px;">
                <div class="col-sm-3" style="width: 28%;">
                    5 Star
                </div>
                <div class="col-sm-5">
                    <div class="progress">
                        <div class="progress-bar progress-bar-theme-color" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" ng-style="{'width': reviewListCounts4.ratingPercentage + '%' }">
                        </div>
                    </div>
                </div>
                <div class="col-sm-1" style="padding-left: 0px;"> {{reviewListCounts4.ratingCount}}
                </div>
                <div class="col-sm-2" style="padding-left: 0px;">{{formatPrice(reviewListCounts4.ratingPercentage)}}%</div>
            </div>
            <div class="row" style="padding: 0px 10px 0px 10px;">
                <div class="col-sm-3" style="width: 28%;">
                    4 Star
                </div>
                <div class="col-sm-5">
                    <div class="progress">
                        <div class="progress-bar progress-bar-theme-color" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" ng-style="{'width': reviewListCounts3.ratingPercentage + '%'}">
                        </div>
                    </div>
                </div>
                <div class="col-sm-1" style="padding-left: 0px;"> {{reviewListCounts3.ratingCount}}
                </div>
                <div class="col-sm-2" style="padding-left: 0px;">{{formatPrice(reviewListCounts3.ratingPercentage)}}%</div>
            </div>
            <div class="row" style="padding: 0px 10px 0px 10px;">
                <div class="col-sm-3" style="width: 28%;">
                    3 Star
                </div>
                <div class="col-sm-5">
                    <div class="progress">
                        <div class="progress-bar progress-bar-theme-color" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" ng-style="{'width': reviewListCounts2.ratingPercentage + '%'}">
                        </div>
                    </div>
                </div>
                <div class="col-sm-1" style="padding-left: 0px;"> {{reviewListCounts2.ratingCount}}
                </div>
                <div class="col-sm-2" style="padding-left: 0px;">{{formatPrice(reviewListCounts2.ratingPercentage)}}%</div>
            </div>
            <div class="row" style="padding: 0px 10px 0px 10px;">
                <div class="col-sm-3" style="width: 28%;">
                    2 Star
                </div>
                <div class="col-sm-5">
                    <div class="progress">
                        <div class="progress-bar progress-bar-theme-color" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" ng-style="{'width': reviewListCounts1.ratingPercentage + '%'}">
                        </div>
                    </div>
                </div>
                <div class="col-sm-1" style="padding-left: 0px;"> {{reviewListCounts1.ratingCount}}
                </div>
                <div class="col-sm-2" style="padding-left: 0px;">{{formatPrice(reviewListCounts1.ratingPercentage)}}%</div>
            </div>
            <div class="row" style="padding: 0px 10px 0px 10px;">
                <div class="col-sm-3" style="width: 28%;">
                    1 Star
                </div>
                <div class="col-sm-5">
                    <div class="progress">
                        <div class="progress-bar progress-bar-theme-color" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" ng-style="{'width': reviewListCounts0.ratingPercentage + '%'}">
                        </div>
                    </div>
                </div>
                <div class="col-sm-1" style="padding-left: 0px;"> {{reviewListCounts0.ratingCount}}
                </div>
                <div class="col-sm-2" style="padding-left: 0px;">{{formatPrice(reviewListCounts0.ratingPercentage)}}%</div>
            </div>
            <div class="text-center" ng-hide="ReviewList_count.length == 0">
                <a href="javascript:void(0)" data-toggle="modal" data-target="#myModal" ng-click="remove_rate()">See all Reviews</a>
            </div>
        </div>
        <!-- Modal -->
        <div class="modal fade model_revie" id="myModal" role="dialog" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h3 class="modal-title" style="font-weight: 500;">Reviews</h3>
                    </div>
                    <div class="modal-body" style="overflow-y: auto;height: 410px;">
                        <!-- <div class="row">
                            <div class="col-sm-6">
                                <h3>Reviews</h3>
                            </div>
                            </div> -->
                        <div class="row" style="padding-bottom: 20px">
                            <div class="col-sm-8">
                                <div class="row">
                                    <!-- <div class="col-sm-4 text-center">
                                        <h5 style="font-weight: 500;font-size: 18px;"> Reviews</h5>
                                    </div> -->
                                    <div class="col-sm-8">
                                        <a class="default_star" href="javascript:void(0)" >
                                            <h1 style="margin-top: 6px;" class="product-stars">
                                                <span class="rating">
                                                    <ul class="list-inline">
                                                        <li>
                                                            <i class="star star-under fa fa-star-o">
                                                                <i ng-show="AverageRating > 0" 
                                                                   class="star star-over fa fa-star" 
                                                                   ng-class="{width25:AverageRating <= 0.25, width50:(AverageRating > 0.25 && AverageRating <= 0.50), width75:(AverageRating > 0.50 && AverageRating <= 0.75), width100:(AverageRating > 0.75 && AverageRating = 1)}"></i>

                                                            </i>
                                                        </li>
                                                        <li>
                                                            <i class="star star-under fa fa-star-o">
                                                                <i ng-show="AverageRating > 1" class="star star-over fa fa-star" ng-class="{width25:AverageRating <= 1.25, width50:(AverageRating > 1.25 && AverageRating <= 1.50), width75:(AverageRating > 1.50 && AverageRating <= 1.75), width100:(AverageRating > 1.75 && AverageRating <= 2)}"></i>
                                                            </i>
                                                        </li>
                                                        <li>
                                                            <i class="star star-under fa fa-star-o">
                                                                <i ng-show="AverageRating > 2" class="star star-over fa fa-star" ng-class="{width25:AverageRating <= 2.25, width50:(AverageRating > 2.25 && AverageRating <= 2.50), width75:(AverageRating > 2.50 && AverageRating <= 2.75), width100:(AverageRating > 2.75 && AverageRating <= 3)}"></i>
                                                            </i>
                                                        </li>
                                                        <li>
                                                            <i class="star star-under fa fa-star-o">
                                                                <i ng-show="AverageRating > 3" class="star star-over fa fa-star" ng-class="{width25:AverageRating <= 3.25, width50:(AverageRating > 3.25 && AverageRating <= 3.50), width75:(AverageRating > 3.50 && AverageRating <= 3.75), width100:(AverageRating > 3.75 && AverageRating <= 4)}"></i>
                                                            </i>
                                                        </li>
                                                        <li>
                                                            <i class="star star-under fa fa-star-o">
                                                                <i ng-show="AverageRating > 4" class="star star-over fa fa-star" ng-class="{width25:AverageRating <= 4.25, width50:(AverageRating > 4.25 && AverageRating <= 4.50), width75:(AverageRating > 4.50 && AverageRating <= 4.75), width100:(AverageRating > 4.75 && AverageRating <= 5)}"></i>
                                                            </i>
                                                        </li>
                                                        <li><span style="font-size: 18px;line-height: 0;">({{ReviewList_count.length}})</span></li>
                                                    </ul>



                                                    <!--                                                    <span class="col-sm-3 noPad" 
                                                                                                              style="color: #000;font-size:16px"> {{ReviewList_count.length}} - {{AverageRating| json}} - {{AverageRatingRemain| json}}
                                                                                                        </span>-->
                                                </span>
                                            </h1>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- <hr> -->
                        <div class="review-popup reviewRow" ng-repeat="reviews in ReviewList_count">
                            <!-- <pre>{{reviews}}</pre> -->
                            <div class="row" ng-hide="reviews.review == ''">
                                <div class="col-sm-3">
                                    <div class="text-center">
                                        <img ng-if="reviews.profile_pic_path" ng-src="{{reviewprofilePath}}{{reviews.profile_pic_path}}" style="width: 50px;height: 50px;border-radius: 50%;border: 1px #CCC solid;margin-left: 22px;">
                                        <img ng-if="!reviews.profile_pic_path" src="img/default-img.jpg" style="width: 50px;height: 50px;border-radius: 50%;border: 1px #CCC solid;">
                                    </div>
                                    <h6 class="text-center" style="margin: 5px 0 0 0px;color: #333;font-weight: 500;font-size:14px">{{reviews.first_name}} {{reviews.last_name}}</h6>
                                </div>
                                <div class="col-sm-9">
                                    <h5 class="">
                                        <p  class="rating" style="font-size: 10px;margin-bottom:0px">
                                            <i class="icon-star voted" ng-repeat="i in getStarCount(reviews.rating) track by $index" ></i> 
                                            <i class="icon-star" ng-repeat="i in getStarCount(5 - reviews.rating) track by $index" ></i> 
                                            <!-- {{reviews.rating}} -->
                                        </p>
                                    </h5>
                                    <p style="margin-bottom:0px" class="text-left">{{reviews.review}}</p>
                                    <div class="row">
                                        <div class="col-sm-12" style="padding-top: 10px">
                                            Posted on : {{changeDateFormat(reviews.created_on);}}
                                        </div>
                                        <!-- <div class="col-sm-4" style="padding-top: 10px">
                                            {{reviews.helpfull_count}} people found this helpful
                                            </div>
                                            <div class="col-sm-3 text-left">
                                            <button class="btn theme-btn icon-thumbs-up" ng-click="submitHelpful(reviews,$index);">helpful</button>
                                            </div> -->
                                    </div>
                                </div>
                            </div>
                            <div class="review-row" ng-hide="$last"></div>
                        </div>
                    </div>
                    <!-- <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div> -->
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $('[rel=popover]').popover({
    container: 'body .ratingHolder',
            html : true,
            content: function() {
            return $('#popover_content_wrapper').html();
            }
    });
    /* $('body').on('click', function (e) {
     $('[rel=popover]').each(function () {
     if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
     $(this).popover('hide');
     }
     e.preventDefault();
     });
     });*/
    $('html').on('mouseup', function(e) {
    if (!$(e.target).closest('.popover').length) {
    $('.popover').each(function(){
    $(this).popover('hide');
    });
    }
    });
    $('body').on('hidden.bs.popover', function (e) {
    $(e.target).data("bs.popover").inState.click = false;
    });
    $('#myModal').on('show.bs.modal', function (e) {
    $('[rel=popover]').popover('hide');
    })
</script>